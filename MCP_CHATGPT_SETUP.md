# دليل ربط ChatGPT مع مشروعك - الطريقة الصحيحة

## ⚠️ ملاحظة مهمة
**لا تستخدم OAuth في إعدادات ChatGPT!** استخدم Bearer Token بدلاً من ذلك.

---

## الخطوات الصحيحة

### 1. احصل على الـ API Key
1. اذهب إلى: https://supabase.com/dashboard/project/uewuiiopkctdtaexmtxu/settings/functions
2. افتح قسم "Secrets"
3. ابحث عن `MCP_API_KEY`
4. انسخ القيمة (مثلاً: `abc123xyz456`)

---

### 2. أضف الرابط في ChatGPT

**في شاشة "إضافة رابط جديد":**

#### الاسم (Name):
```
Lovable Affiliate System
```

#### الوصف (Description):
```
نظام افلييت لوفبل - وصول كامل للبيانات
```

#### URL:
```
https://uewuiiopkctdtaexmtxu.supabase.co/functions/v1/mcp-full-access
```

#### المصادقة (Authentication):
**⚠️ مهم: لا تختر OAuth!**

اختر **"Bearer Token"** أو **"API Key"** (حسب الخيارات المتاحة)

ثم ضع الـ API Key الذي حصلت عليه من الخطوة 1:
```
Bearer abc123xyz456
```

أو فقط:
```
abc123xyz456
```

---

### 3. اختبر الاتصال

في ChatGPT، اكتب:
```
كم عدد المتاجر النشطة؟
```

ChatGPT سيتصل بالـ endpoint ويجلب البيانات.

---

## أمثلة على الأوامر

### عرض جميع الجداول
```
اعرض لي جميع الجداول في قاعدة البيانات
```

### عرض المتاجر
```
اعرض لي جميع المتاجر النشطة
```

### إضافة متجر
```
أضف متجر جديد باسم "متجر الكترونيات"
```

### البحث
```
ابحث عن المتاجر التي تحتوي على كلمة "الكترونيات"
```

---

## إذا ظهر خطأ OAuth

إذا ظهرت رسالة:
> "OAuth خطأ في استرجاع تكوين MCP server"

**الحل:**
1. احذف الرابط من ChatGPT
2. أضف رابط جديد
3. **لا تختر OAuth!**
4. اختر Bearer Token أو API Key
5. ضع الـ API Key مباشرة

---

## الفرق بين الطرق

| الطريقة | الاستخدام |
|---------|-----------|
| **Bearer Token** ✅ | الطريقة الصحيحة - ضع الـ API Key مباشرة |
| **API Key** ✅ | نفس Bearer Token تقريباً |
| **OAuth** ❌ | **لا تستخدمها!** معقدة وغير مطلوبة |

---

## أسئلة شائعة

### هل أحتاج Client ID و Client Secret؟
**لا!** فقط الـ API Key من Supabase Secrets.

### هل أحتاج Redirect URL؟
**لا!** هذه فقط لـ OAuth ونحن لا نستخدمه.

### ماذا لو لم يعمل؟
1. تأكد من الـ API Key صحيح
2. تأكد من اختيار Bearer Token وليس OAuth
3. جرب حذف الرابط وإضافته من جديد

---

## الصلاحيات المتاحة

✅ قراءة جميع البيانات
✅ إضافة بيانات جديدة  
✅ تعديل البيانات الموجودة
✅ حذف البيانات
✅ عرض جميع الجداول
✅ وصف أي جدول

---

## الأمان

⚠️ **هذا يعطي صلاحيات كاملة!**
- لا تشارك الـ API Key مع أحد
- استخدمه فقط من حساب ChatGPT الخاص بك
- راجع العمليات قبل التنفيذ
