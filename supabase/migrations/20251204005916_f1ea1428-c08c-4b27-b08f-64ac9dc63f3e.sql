-- تحويل جميع Views من SECURITY DEFINER إلى SECURITY INVOKER
-- هذا يضمن أن سياسات RLS تُطبق على المستخدم الذي يستعلم وليس منشئ الـ View

ALTER VIEW public.safe_profiles SET (security_invoker = on);
ALTER VIEW public.user_profiles_compat SET (security_invoker = on);
ALTER VIEW public.v_user_stats SET (security_invoker = on);
ALTER VIEW public.archived_legacy_orders SET (security_invoker = on);
ALTER VIEW public.archived_legacy_simple_orders SET (security_invoker = on);
ALTER VIEW public.assistant_functions SET (security_invoker = on);
ALTER VIEW public.assistant_policies SET (security_invoker = on);
ALTER VIEW public.assistant_triggers SET (security_invoker = on);
ALTER VIEW public.gmv_analytics SET (security_invoker = on);
ALTER VIEW public.page_builder_archive SET (security_invoker = on);
ALTER VIEW public.refunds_analytics SET (security_invoker = on);
ALTER VIEW public.shipments_with_latest_event SET (security_invoker = on);
ALTER VIEW public.store_pages_compat SET (security_invoker = on);
ALTER VIEW public.v_generated_columns_status SET (security_invoker = on);
ALTER VIEW public.v_metrics_orders_daily SET (security_invoker = on);
ALTER VIEW public.v_metrics_payments SET (security_invoker = on);
ALTER VIEW public.v_metrics_payments_daily SET (security_invoker = on);
ALTER VIEW public.v_metrics_refunds_daily SET (security_invoker = on);
ALTER VIEW public.v_metrics_shipments SET (security_invoker = on);
ALTER VIEW public.v_shipments_overview SET (security_invoker = on);
ALTER VIEW public.v_metrics_shipments_daily_unified SET (security_invoker = on);
ALTER VIEW public.v_unified_shipments SET (security_invoker = on);
ALTER VIEW public.v_ops_refunds_daily SET (security_invoker = on);
ALTER VIEW public.v_ops_top_products SET (security_invoker = on);
ALTER VIEW public.v_order_complete SET (security_invoker = on);
ALTER VIEW public.v_order_hub_with_relations SET (security_invoker = on);
ALTER VIEW public.v_order_items_unified SET (security_invoker = on);
ALTER VIEW public.v_refunds_with_orders SET (security_invoker = on);
ALTER VIEW public.v_returns_with_orders SET (security_invoker = on);
ALTER VIEW public.v_shipments_with_orders SET (security_invoker = on);
ALTER VIEW public.v_ops_payments_daily SET (security_invoker = on);
ALTER VIEW public.assistant_policies_batch1 SET (security_invoker = on);
ALTER VIEW public.assistant_policies_batch2 SET (security_invoker = on);
ALTER VIEW public.assistant_tables SET (security_invoker = on);
ALTER VIEW public.orders_dashboard SET (security_invoker = on);
ALTER VIEW public.performance_overview SET (security_invoker = on);
ALTER VIEW public.shipments_dashboard SET (security_invoker = on);
ALTER VIEW public.returns_analytics SET (security_invoker = on);
ALTER VIEW public.security_definer_functions_audit SET (security_invoker = on);
ALTER VIEW public.v_cms_pages_full SET (security_invoker = on);
ALTER VIEW public.v_metrics_orders_gmv SET (security_invoker = on);
ALTER VIEW public.v_metrics_refunds SET (security_invoker = on);
ALTER VIEW public.v_metrics_shipments_daily SET (security_invoker = on);
ALTER VIEW public.v_ops_affiliate_performance SET (security_invoker = on);
ALTER VIEW public.v_ops_orders_status_daily SET (security_invoker = on);
ALTER VIEW public.v_ops_shipping_status_daily SET (security_invoker = on);
ALTER VIEW public.v_order_hub_full SET (security_invoker = on);
ALTER VIEW public.v_orders_unified SET (security_invoker = on);
ALTER VIEW public.v_unified_order_items SET (security_invoker = on);