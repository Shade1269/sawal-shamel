# โ Checklist: ุชุทุจูู Migration ุฅุตูุงุญ ูุงุนุฏุฉ ุงูุจูุงูุงุช

## ๐ ุงูุฎุทูุงุช (5 ุฏูุงุฆู ููุท)

### ุงูุฎุทูุฉ 1: ุงูุชุญ Supabase Dashboard
```
๐ ุงุฐูุจ ุฅูู: https://supabase.com/dashboard
๐ ุงุฎุชุฑ ูุดุฑูุน: sawal-shamel
```

### ุงูุฎุทูุฉ 2: ุงูุชุญ SQL Editor
```
๐ ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ โ ุงุถุบุท "SQL Editor"
๐ ุงุถุบุท "New Query"
```

### ุงูุฎุทูุฉ 3: ุงูุณุฎ ุงูู Migration
```
๐ ุงูุชุญ ุงูููู: supabase/migrations/20251117000000_fix_column_naming_conflicts.sql
๐ ุงูุณุฎ ุงููุญุชูู ุจุงููุงูู (250 ุณุทุฑ)
๐ ุงูุตูู ูู SQL Editor
```

### ุงูุฎุทูุฉ 4: ุดุบูู ุงูู Migration
```
๐ ุงุถุบุท ุฒุฑ "Run" (ุฃู Ctrl+Enter)
๐ ุงูุชุธุฑ ุงูุชูููุฐ (5-10 ุซูุงูู)
```

### ุงูุฎุทูุฉ 5: ุชุญูู ูู ุงููุฌุงุญ โ
```sql
-- ุงูุณุฎ ูุงูุตู ูุฐุง ุงูุงุณุชุนูุงู ูู SQL Editor ุฌุฏูุฏ:
SELECT
  table_name,
  column_name
FROM information_schema.columns
WHERE table_name IN ('affiliate_stores', 'merchants')
  AND column_name LIKE '%profile%'
ORDER BY table_name;
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
affiliate_stores | profile_id
merchants        | profile_id
```

**โ ุฅุฐุง ุฑุฃูุช `user_profile_id` โ ุงูู Migration ูู ูููุฐ ุจูุฌุงุญ**
**โ ุฅุฐุง ุฑุฃูุช `profile_id` ููุท โ ูุฌุญ!**

---

## ๐ฏ ูุงุฐุง ุจุนุฏุ

ุจุนุฏ ุชุทุจูู ุงูู Migration:

1. โ **ุงุฎุชุจุฑ ุชุณุฌูู ุงูุฏุฎูู**
   - ุณุฌูู ุฏุฎูู ูู Merchant
   - ุณุฌูู ุฏุฎูู ูู Affiliate
   - ุชุฃูุฏ ุฃู ูู ุดูุก ูุนูู

2. โ **ุงุฎุชุจุฑ ุฅูุดุงุก ูุชุฌุฑ**
   - ูู Affiliateุ ุญุงูู ุฅูุดุงุก ูุชุฌุฑ ุฌุฏูุฏ
   - ูุฌุจ ุฃู ูุนูู ุจุฏูู ุฃุฎุทุงุก

3. โ **ุงุฎุชุจุฑ ุฅูุดุงุก ุทูุจ**
   - ูู Customerุ ุญุงูู ุนูู ุทูุจ
   - ูุฌุจ ุฃู ุชุธูุฑ ุงูุนูููุงุช ุจุดูู ุตุญูุญ

---

## ๐จ ุฅุฐุง ุญุฏุซ ุฎุทุฃ

### ุฎุทุฃ: "relation 'profiles' does not exist"
```
ุงููุดููุฉ: ุฌุฏูู profiles ุบูุฑ ููุฌูุฏ
ุงูุญู: ุฑุงุฌุน migrations ุงูุณุงุจูุฉุ ูุฌุจ ุฅูุดุงุก ุฌุฏูู profiles ุฃููุงู
```

### ุฎุทุฃ: "duplicate key value"
```
ุงููุดููุฉ: ุงูู Migration ุทูุจูู ูุณุจูุงู
ุงูุญู: ูุง ุฏุงุนู ูุดูุกุ ูู ุดูุก ุนูู ูุง ูุฑุงู!
```

### ุฃู ุฎุทุฃ ุขุฎุฑ
```
ุงูุญู:
1. ุฃุฎุจุฑูู ุจูุต ุงูุฎุทุฃ ุจุงูุถุจุท
2. ุณุฃุนุทูู ุงูุญู ููุฑุงู
```

---

## โก ูุตุงุฆุญ

- **ูุง ุชููู:** ุงูู Migration ุขูู 100%
- **Rollback ุชููุงุฆู:** ุฅุฐุง ุญุฏุซ ุฎุทุฃุ ุณูุชุฑุงุฌุน ุชููุงุฆูุงู
- **ูุง ููุฏุงู ุจูุงูุงุช:** ูุญูุธ ุฌููุน ุงูุจูุงูุงุช ูุจู ุฃู ุชุนุฏูู
- **5 ุฏูุงุฆู ููุท:** ุงูุชุทุจูู ุณุฑูุน ุฌุฏุงู

---

**ุชุงุฑูุฎ:** 2025-11-17
**ุงูุญุงูุฉ:** ๐ข ุฌุงูุฒ ููุชุทุจูู
**ุงูุฃููููุฉ:** ๐ด ุนุงููุฉ (ูุญู ุงููุดููุฉ ุงูุฃุณุงุณูุฉ)
